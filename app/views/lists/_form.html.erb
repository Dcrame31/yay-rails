<%= form_for @list do |f| %>
<%= f.label :name %><br>
<%= f.text_field :name %><br>
<%= f.label :description %><br>
<%= f.text_area :description %><br>

<p>
<%= f.label 'Items:' %>
<br>
<br>
<%= f.fields_for :items do |item| %>
    <%= item.label :name %>
    <%= item.text_field :name %>
    <%= item.label :qty %>
    <%= item.number_field :qty %>
    <%= item.label :price %>
    <%= item.number_field :price %><br>
    <br>
    <%= item.hidden_field :list_id, :value => @list.id %>
    <% end %>
</p>

<br>

<%= f.label :budget %><br>
<%= f.number_field :budget %><br>
<br>
<%= f.label :category %><br>
<%= f.collection_check_boxes :category_ids, current_user.categories.all, :id, :name %><br>
<br>
<%= f.label 'New Category'%><br>
<%# <%= f.fields_for :categories do |category| %> 
    <%# <%= category.hidden_field :user_id, :value => "current_user.id" %> 
  <%# <% end %> 
<input value type="text" name="list[categories_attributes][0][name]" id="list_categories_attributes_0_name"><br>
<input value="current_use.id" type="hidden" name="list[categories_attributes][0][user_id]" id="list_categories_attributes_0_name">
<%= f.hidden_field :user_id, :value => current_user.id %>
<%= f.hidden_field :category_ids, :value => @category %>
<%= f.submit list.persisted? ? 'Update List': 'Create List' %><br>
<% end %>